
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sign in â€¢ OpenInterview.me</title>
  <link rel="stylesheet" href="/css/tailwind.css"/>
  <link rel="stylesheet" href="/css/theme.css" />
  
  <style>
    .wrap{min-height:calc(100vh - 73px);display:grid;place-items:center;padding:24px}
    .card{width:min(420px,92vw);background:#fff;border:1px solid rgba(20,20,20,0.1);border-radius:0.25rem;padding:22px;box-shadow:0 8px 28px rgba(0,0,0,.06)}
    h1{margin:0 0 6px} .sub{color:#141414;opacity:0.6;margin:0 0 14px}
    .row{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .chip{padding:6px 10px;border:1px solid rgba(20,20,20,0.1);border-radius:999px;cursor:pointer;font-size:13px;background:#fff}
    .err{display:none;color:#b91c1c;background:#fee2e2;border:1px solid #fecaca;border-radius:10px;padding:8px 10px;margin-top:10px}
    .fine{font-size:12px;opacity:0.6;margin-top:10px}
  </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display">
  <header class="flex items-center justify-between whitespace-nowrap border-b border-primary/10 px-10 py-4">
    <div class="flex items-center gap-4">
      <div class="h-6 w-6">
        <svg fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
          <path d="M44 11.2727C44 14.0109 39.8386 16.3957 33.69 17.6364C39.8386 18.877 44 21.2618 44 24C44 26.7382 39.8386 29.123 33.69 30.3636C39.8386 31.6043 44 33.9891 44 36.7273C44 40.7439 35.0457 44 24 44C12.9543 44 4 40.7439 4 36.7273C4 33.9891 8.16144 31.6043 14.31 30.3636C8.16144 29.123 4 26.7382 4 24C4 21.2618 8.16144 18.877 14.31 17.6364C8.16144 16.3957 4 14.0109 4 11.2727C4 7.25611 12.9543 4 24 4C35.0457 4 44 7.25611 44 11.2727Z" fill="currentColor"></path>
        </svg>
      </div>
      <h2 class="text-lg font-bold text-primary dark:text-white">OpenInterview.me</h2>
    </div>
    <nav class="flex items-center gap-6"></nav>
  </header>
  <main class="wrap">
    <section class="card" aria-labelledby="title">
      <h1 id="title">Sign in</h1>
      <p class="sub">Enter your email to continue.</p>
      <form id="form" novalidate>
        <label for="email" style="display:block;font-size:12px;color:var(--muted);margin:8px 0 6px">Email</label>
        <input id="email" class="input" type="email" placeholder="you@example.com" autocomplete="email" required />
        <button class="btn" type="submit" style="margin-top:12px;width:100%">Continue</button>
        <div id="err" class="err" role="alert">Please enter a valid email.</div>
      </form>
      <div class="fine">Demo accounts:</div>
      <div class="row" aria-label="Demo accounts">
        <button class="chip" data-fill="user@example.com">user@example.com</button>
        <button class="chip" data-fill="admin@example.com">admin@example.com</button>
      </div>
    </section>
  </main>
  <script type="module">
    import { api } from "/js/app.js";
    const $ = s => document.querySelector(s);
    document.querySelectorAll('[data-fill]').forEach(b => b.addEventListener('click', ()=>{ $('#email').value = b.dataset.fill; $('#email').focus(); }));
    $('#form').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const email = $('#email').value.trim();
      if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)){ $('#err').style.display='block'; return; }
      $('#err').style.display='none';
      try{
        const data = await api('/api/auth/login', { method:'POST', body: JSON.stringify({email}) });
        localStorage.setItem('me', JSON.stringify(data.user));
        location.href = data.user.role === 'admin' ? '/admin.html' : '/profile.html';
      }catch(err){ $('#err').textContent='Sign-in failed. Please try again.'; $('#err').style.display='block'; }
    });
  </script>

    <script>
      // Cleanup any old service workers/caches from previous SPA deployments.
      (function cleanup(){
        if ('serviceWorker' in navigator) {
          navigator.serviceWorker.getRegistrations().then(rs => rs.forEach(r => r.unregister()));
        }
        if (window.caches && caches.keys) {
          caches.keys().then(keys => keys.forEach(k => caches.delete(k)));
        }
      })();
    </script>

<script type="module" src="/js/nav-patch.js"></script>
<script type="module" src="/js/redirect-shim.js"></script>
</body></html>