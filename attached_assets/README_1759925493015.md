# OpenInterview Manage Booking Patch (Replit-Ready)

This patch adds:
1) **Inline success state** on the shareable profile page (`client/public/js/booking-success.js`).
2) **Manage Booking page** (`client/public/manage-booking.html`).
3) **Public Booking API routes** (`server/routes/publicBookings.js`) and service adapter (`server/services/booking.adapter.js`).

It ships with **guardrails** to prevent unintended edits and **self-tests** to validate the update.

## Apply (Safe)
On Replit (or any Node 18+ env):
```bash
# 1) Unzip this pack at the project root, then:
node guardrails/verify-guardrails.cjs
node guardrails/apply_patch.mjs
```

- `verify-guardrails.cjs` checks this pack only writes to allowed files.
- `apply_patch.mjs` copies files to your repo safely.

## Test
```bash
npm i
npm run test
```

- API tests spin up a local Express instance with the **public bookings** router only.
- Frontend tests load the `manage-booking.html` in jsdom and check key elements & scripts.
- Selftest JSON is printed last as a summary Replit can read.

## Integrate in your app
- Mount the router in your server (once copied):
```js
// server/index.js (example)
const publicBookings = require('./routes/publicBookings');
app.use('/api/public', publicBookings);
```

- Include the success script on your **shareable profile** page and call `showBookingSuccess(booking)` after a booking is created:
```html
<script src="/js/booking-success.js"></script>
<script>
  // showBookingSuccess(booking) with your real booking object
</script>
```

## Security Notes
- The **public booking token** must be scoped per booking, rotated on reschedule/cancel, and validated server-side.
- Times are UTC in storage; rendered in browser local time.
- API endpoints in this patch are designed for public, tokenized access.
