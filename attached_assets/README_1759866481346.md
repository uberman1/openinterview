# Public Booking Flow Patch

Adds:
1) **Inline success** on the shareable profile page (no HTML changes): shows date/time, candidate, **Add to Calendar (.ics)**, and **Manage Booking**.
2) **Manage Booking page** (`/booking_manage.html` & `/booking/manage/:token`): reschedule/cancel.

## Files
- `public/js/public_profile.book.bind.js` — posts booking & renders success, generates ICS if needed.
- `public/booking_manage.html` — exact HTML provided.
- `public/js/booking_manage.bind.js` — wires reschedule/cancel.
- `scripts/apply_public_booking_flow.mjs` — installs files & patches `index.js` to serve with binders.
- `scripts/selftest_public_booking_flow.mjs` — route + injection checks.

## Apply
```bash
unzip public_booking_flow_patch.zip -d /tmp/oi_book && cp -R /tmp/oi_book/* .
node scripts/apply_public_booking_flow.mjs
# restart server (npm run dev)
npm i supertest cheerio
node scripts/selftest_public_booking_flow.mjs
```

## API (progressive fallbacks)
- Create: `POST /api/public/bookings` → `{ bookingId?, manageUrl?, icsUrl? }` (fallback: `POST /api/bookings`)
- Reschedule: `POST /api/public/bookings/:id/reschedule?token=...` (fallback: `/api/bookings/:id/reschedule`)
- Cancel: `POST /api/public/bookings/:id/cancel?token=...` (fallback: `/api/bookings/:id/cancel`)
- Read: `GET /api/public/bookings/:id?token=...` (fallback: `/api/bookings/:id`)
