# Public Profile Patch (Guardrails) — v1.0
Date: 2025-10-08

This patch provides **non-destructive** fixes for `public_profile.html` / `profile_public.html` issues:

- Prevent JS crash when `/api/public/profile/:handle` returns 404
- Keep calendar initialization non-fatal and show an empty state if no data
- Restore spacing between video and the scrolling/content area (preserve `mt-12`)
- Resolve dynamic scrolling conflicts by *disabling* wholesale class overwrites and using *additive* classes
- Selector hardening (prefer IDs / data-roles when possible) without changing your DOM structure
- All changes are **opt-in and reversible**, with backups

## What this patch does
1. **Comments out** conflicting binders if present:
   - `public_profile.scroll.bind.js`
   - `public_profile.hero-shrink.bind.js`
2. **Injects** a safe, consolidated binder: `public_profile.safe.js` (additive classes; no `body overflow: hidden`).
3. **Adds** global error guards so a failing API won’t crash the page.
4. **Leaves your markup intact**; no Tailwind class replacement, only `classList.add(...)`.

## Apply (Linux/macOS)
```bash
cd /path/to/your/repo
# 1) Backup target file(s)
bash patch/backup.sh

# 2) Apply (best-effort) search/replace and script injection
bash patch/apply_patch.sh
```

> The script looks for either `public_profile.html` **or** `profile_public.html` under your web root (e.g., `public/`, `static/`, or `templates/`). It will create a time-stamped backup before writing.

## Rollback
```bash
bash patch/revert_patch.sh
```

## Files included
- `static/js/public_profile.safe.js` — consolidated, non-destructive binder & guards
- `patch/apply_patch.sh` — comments out conflicting scripts, injects safe script
- `patch/backup.sh` — creates time-stamped backups
- `patch/revert_patch.sh` — restores latest backup
- `patch/verify_checklist.md` — visual & console checks
- `mock/api-samples.json` — example API payloads for local testing

## Notes
- If your app serves the file via a framework template, ensure the path in `apply_patch.sh` (`CANDIDATES=(...)`) includes your template directory.
- If you keep the old binders, ensure they’re *not* both active at the same time as the safe binder.

