# New Interview — Guardrailed Self-Deploy Package

This package adds the **New Interview** workflow (profile creation, inline editing, per‑profile availability, asset library) **without modifying your existing UI files**.
It installs runtime scripts and Playwright tests, and includes a guardrails installer that refuses to change protected files.

## What it does (MVP)
- Uses the existing **Create New** and **Add New** links on `home.html`.
- Loads the v4.1 **shareable profile** template as a draft (`/profile/new`) and enables inline editing.
- Adds a per‑profile **Availability** editor (`/availability/:id`) and persistence (localStorage).
- Central **Asset Library** for resumes & attachments (search or upload).
- **Save Profile** publishes (status=live) and shows on Home → My Interviews.
- **Share Profile** shows a copyable `/p/:slug` link (view‑only mode).
- Playwright E2E tests for the full flow.

## Guardrails
- Protected files are listed in `src/guards/guardrails.config.json`.
- The installer refuses to overwrite these files (or any file not in allowed targets).
- No DOM insertions on `home.html`; we only bind to existing links.
- All UI changes are progressive enhancement via separate JS files.

## Install (Replit)
1. Upload/unzip this archive into your project root (or keep in a folder).
2. Run the installer:
   ```bash
   node scripts/deploy.mjs --target public/js --tests public/tests --guards public/guards
   ```
   - The installer copies runtime scripts to `public/js` and tests to `public/tests` (configurable).
   - It will **abort** if a protected file would be changed.
3. Ensure your pages load the scripts:
   - `home.html` should already include your project’s loader. If not, add:
     ```html
     <script type="module" src="/js/home-bindings.js"></script>
     ```
   - `profile_v4_1_package/public/index.html` should include:
     ```html
     <script type="module" src="/js/data-store.js"></script>
     <script type="module" src="/js/asset-library.js"></script>
     <script type="module" src="/js/profile-editor.js"></script>
     ```
     (If you already have a bundler/loader, just import these modules there.)
4. Run tests (optional):
   ```bash
   npm i --save-dev @playwright/test
   npx playwright install --with-deps
   npx playwright test public/tests/playwright
   ```

## Scripts
- `scripts/deploy.mjs` — copies files with guard checks (no overwrites).
- `scripts/selftest.mjs` — runs a dry‑run copy and prints what would change.

## Uninstall
Delete the copied files in your `public/js`, `public/tests`, and `public/guards` folders.

---
