# OpenInterview — Module 1 (Login) Cutover • Replit Task

**Chosen option:** Replace the current login flow with the Module‑1 static HTML version and enable the cutover + guardrails. Keep the rest of the app as-is for now.

---

## Files to add/overwrite (from the Module‑1 zip)
Place these at the project root, preserving paths:

```
index.js
seed.json
selftest.mjs
GUARDRAILS.md
public/login.html
public/index.html
public/js/app.js
public/css/theme.css
package.json
README.md
```

> Do not rename or relocate any of these files. They’re required for guardrails and tests.

---

## Run command (Replit)
Set the run command to:
```
npm start
```

This executes `node index.js` which serves static files and the mock API on `PORT`.

---

## Cutover requirements
1) **Root redirect** — `/` must redirect to **`/login.html`** (handled by `index.js`).  
2) **Legacy hash routes** — `/#/login` must redirect to **`/login.html`** (handled by `public/index.html`).  
3) **Cache cleanup** — keep the small script inside `public/login.html` that unregisters old service workers/caches so the previous SPA login cannot reappear.

---

## Guardrails (do NOT change)
- Do **not** alter the HTML or CSS in:
  - `public/login.html`
  - `public/css/theme.css`
  - `public/index.html`
- Do **not** introduce additional frameworks/resets or change `package.json` beyond what’s provided.
- Keep role routing: **admin → `/admin.html`**, everyone else → **`/profile.html`**.
- All visual tokens (white bg, black text, **black “Continue”** button) must remain identical to the approved render.

Guardrail checksums are enforced by `selftest.mjs`. Any unapproved change will fail `npm test`.

---

## Installation & verification
```bash
npm install
npm start     # Replit “Run” should do this automatically
```

Open the webview at `/login.html` (root will redirect there). You must see the **minimalist login** with black “Continue” and demo chips.

---

## Automated self‑test (must pass)
```bash
npm test
```
The test verifies:
- Checksums for `public/login.html`, `public/css/theme.css`, and `public/index.html`  
- Root `/` redirects to `/login.html`  
- `index.html` contains the legacy hash redirect  
- Auth stubs respond for user/admin

---

## Acceptance criteria (Definition of Done)
- Visiting `/`, `/index.html`, or `/#/login` lands on **`/login.html`**.
- `/login.html` matches the approved screenshot **exactly** (brand bar, centered card, black button).
- Role routing works: `admin@example.com` → `/admin.html`, `user@example.com` → `/profile.html`.
- `npm test` passes, including checksum guardrails.
- No new packages added; no visual drift introduced.

---

## Troubleshooting
- Still seeing the old dark login? You’re likely hitting an old SPA route or cached assets. Hard-refresh the webview. The included script in `login.html` unregisters old service workers and clears caches automatically.
- If `npm test` fails on checksums, files were modified. Revert them or update guardrails via an approved ticket (out of scope for this task).