# Module 6 — Payments (Mock-First)

Goal
- Add a mock payments adapter and API routes.
- Minimal client hook for "Upgrade to Pro".
- Selftests for checkout/session/webhook flow.

Included
- server/payments.mock.ts — in-memory sessions and plan activation
- server/payments.routes.ts — routes: checkout, session, webhook
- server/routes.ts.patch — mount payments routes
- scripts/selftest_hook.m06.patch.txt — patch snippet to extend your unified runner (if not using the merged one above)
- client/src/components/UpgradeButton.jsx — minimal UI hook

How to apply
1) Add `server/payments.mock.ts` and `server/payments.routes.ts`.
2) Edit `server/routes.ts` using the patch snippet to mount the payments routes.
3) Use the merged `scripts/selftest.js` from the Module 5 bundle OR apply the `scripts/selftest_hook.m06.patch.txt`.
4) (Optional) Add `UpgradeButton.jsx` to your UI.

Run
  npm run build
  MODULE_NUM=06 node scripts/selftest.js

Expected
- `payments.checkout`, `payments.session.open`, `payments.webhook.paid`, `payments.session.paid` all PASS.
- Logs: `logs/selftest.mod-06.json`, `logs/mod-06.log`.
