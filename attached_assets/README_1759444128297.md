
# OpenInterview Demo Mode Pack (Non-Invasive)

This pack lets you preview **any page** of your app without real auth/data using a toggleable **Demo Mode** and a static **demo launcher** page.

It **does not change structure**. You can enable/disable with a query param or env var.

---

## Files

- `public/demo.html` — Standalone launcher with links to your routes (loads pages in an iframe with `?demo=1`).
- `src/lib/demo.ts` — Small helpers to enable/disable Demo Mode and detect it from the app.
- `src/lib/guardrails.ts` — Safety checks that restrict Demo Mode to safe hosts (e.g., localhost, Replit preview).

> You only need to import `isDemo` in your **existing** auth gate / protected routes to allow rendering when demo is on.

---

## Install

1. Copy files into your project:
   - `public/demo.html` → your project's `public/` folder.
   - `src/lib/demo.ts` and `src/lib/guardrails.ts` → your project's `src/lib/` folder.

2. Ensure your bundler knows about `@` alias (optional). If you use `@/` for imports, add this to `vite.config.ts`:

```ts
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import path from 'path'

export default defineConfig({
  plugins: [react()],
  resolve: { alias: { '@': path.resolve(__dirname, 'src') } }
})
```

3. **Guard change (single, safe line):** In your existing route guard (e.g., `AuthGate.tsx`), allow pass-through when `isDemo()` is true.

Example minimal change:

```tsx
// AuthGate.tsx (excerpt)
import { isDemo } from '@/lib/demo'
import { assertDemoAllowed, showDemoBanner } from '@/lib/guardrails'

export default function AuthGate({ children }: { children: React.ReactNode }) {
  // guardrail: if demo is on but not allowed for this host, stop it
  assertDemoAllowed()

  if (isDemo()) {
    showDemoBanner() // small floating "DEMO MODE" chip
    return <>{children}</>
  }

  // ... your normal auth/session logic remains unchanged ...
}
```

No other structural changes are required.

4. **(Optional) Enable via env:** In Replit/Secrets or `.env`,
```
VITE_DEMO_MODE=true
# Allow demo on these hosts (comma-separated). Defaults allow localhost + Replit previews.
VITE_DEMO_ALLOWED_HOSTS=localhost,127.0.0.1,.repl.co,.replit.dev
# Block demo on these hosts (comma-separated). Add your production domains here.
VITE_DEMO_BLOCKED_HOSTS=.openinterview.me,.openinterview.com
```
If you don’t want env-based enabling, you can use the query param only (`?demo=1`).

---

## Use

- Visit `/demo.html` to open the launcher.
- Click routes in the left rail to load them with `?demo=1` in an iframe.
- Click "Open current route in new tab" to interact full screen.
- To **exit demo**, remove `?demo=1` and/or set `VITE_DEMO_MODE` to false. You can also click the "Exit Demo" button on the launcher to clear the local flag.

---

## Guardrails

- Demo Mode only activates when **enabled** and **allowed** on the current host.
- Default allowlist: `localhost`, `127.0.0.1`, and Replit preview domains (`.repl.co`, `.replit.dev`).
- Default blocklist: `.openinterview.me`, `.openinterview.com` (edit to match your production domains).
- If Demo Mode is forced on a blocked host, it will be **auto-disabled** and a console warning is shown.

---

## Customize the launcher links

Edit `public/demo.html` and update the `<nav>` items to your app’s routes.

---

## Troubleshooting

- If a page still shows "Unauthorized": confirm your `AuthGate` includes the `isDemo()` bypass.
- If the launcher shows a blank iframe: your app may use a different base path; adjust the `base` detection in `demo.html` if needed.
- Production shows "demo disabled": that’s expected per guardrails—remove your domain from the blocklist to enable in prod (not recommended).

---

## Uninstall

Delete these three files. Remove the `isDemo()` check in your guard. Nothing else in your app is affected.
