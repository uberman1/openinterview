# Profiles Page — UI Update Patch

**What this does**
- Installs your exact `public/profiles.html` (Tailwind + Inter) and injects a binder at response-time.
- Replaces the header with the **Home-style top menu** (Home, Availability, Profiles, Uploads, Subscription, Password, Log Out).
- Keeps backend intact; wires all actions to existing routes with progressive fallbacks.

**Wired functionality**
- **Top Menu** routes (progressive picks):  
  Home → `/home.html` → `/profile.html` → `/`  
  Availability → `/availability.html` → `/availability`  
  Profiles → `/profiles.html` → `/profiles`  
  Uploads → `/uploads.html` → `/uploads`  
  Subscription → `/subscription.html` → `/billing` → `/subscription`  
  Password → `/password.html` → `/settings/password` → `/password`  
  Log Out → `/logout` or `POST /api/auth/logout`, then `/login.html`

- **Table Hydration:** attempts `GET /api/profiles` (supports `{ data:[...] }` or `[...]`), else leaves static rows.
- **New Profile:** `/profiles/new` → `/profile_edit.html` → `/profile/new`
- **View:** opens shareable URL from `/api/profiles/{id}` (handle/slug) or `/api/profiles/{id}/share` (returns `{url}`), fallback to `/profile_public.html?profileId={id}`
- **Share:** copies same URL to clipboard with a toast.
- **Edit:** `/profiles/{id}/edit` → `/profile_edit.html?profileId={id}`
- **Set Default:** makes a single default via API (tries `POST/PUT /api/profiles/{id}/default` or `POST /api/profiles/default { id }`).

**Apply (Replit)**
```bash
unzip profiles_ui_update_patch.zip -d /tmp/oi_profiles && cp -R /tmp/oi_profiles/* .
node scripts/apply_profiles_ui_update.mjs
# restart server (e.g., npm run dev)
npm i supertest cheerio
node scripts/selftest_profiles_ui.mjs
```

**Guardrails**
If `expected.sha256.json` exists, the script adds a checksum entry for `public/profiles.html` to enforce byte-for-byte integrity.

**Rollback**
```bash
cp -f public/profiles_prev.html public/profiles.html
# Optionally remove the PROFILES_BIND_INJECT block from index.js
```
