# Phase-3 Patch — Availability Mechanics & Public Slots

**Goal:** Complete Section **D** by wiring the Availability editor to a persisted model and powering slot rendering on the public profile. Minimal, framework-free JS; non-destructive to existing markup.

## What this adds
- `js/availability.model.js`
  - Canonical availability schema (timezone, weekly day on/off + blocks, rules).
  - Helpers: normalize, enable day, add/remove/clear blocks, copy day to all, set rules.
- `js/slotgen.js`
  - Deterministic slot generator honoring: increments, allowed durations, min notice, window, buffers, and daily cap.
  - Excludes collisions with existing bookings (with pre/post buffers applied).
- `js/availability.editor.bind.js`
  - Wires the existing **Set Your Availability** UI to the model:
    - Day toggles (SUN–SAT), Add Block (via prompt), block pills with delete (no new markup required).
    - Quick actions: copy hours to all, set all unavailable, clear all hours.
    - Rules persistence for Minimum Notice, Scheduling Window, Increments, Buffers, Daily Cap.
  - Saves `availability` into the profile during the existing `profile:save-request` flow.
  - Hydrates the editor on load from any existing profile availability.
- `js/public_profile.book.bind.js`
  - Reads saved availability + bookings and renders slots into `[data-booking-slots]` (or `#booking-slots`) on the public profile.

## What stays untouched
- All HTML from previous patches (buttons removed, help text, etc.).
- Existing save/redirect pipeline and page binders.

## Install
Upload the ZIP and run:
```bash
bash install_phase3.sh
```
This will:
1. Copy JS files into `/js/`.
2. Inject script tags into `profile_edit_enhanced.html` for:
   - `/js/availability.model.js`
   - `/js/slotgen.js`
   - `/js/availability.editor.bind.js`
3. Attempt to inject `/js/public_profile.book.bind.js` into your public profile page:
   - Looks in `profile_v4_1_package/public/index.html`, then `public/index.html`.
   - Injection only happens if the tag isn’t already present.

> Public page note: To render slots, ensure your public profile includes a container like:
```html
<div data-booking-slots></div>
```
If not present, the binder does nothing (non-destructive).

## Replit patch description (paste into PR/commit)
**Phase-3: Availability Mechanics & Public Slot Rendering**  
- Adds a small availability model + slot generator and binds the existing editor UI (day toggles, add blocks, quick actions, rules).  
- Persists `availability` with the existing `profile:save-request` flow; no extra save buttons.  
- Public profile renders deterministic available slots honoring increments, buffers, min notice, window, and daily cap.  
- Non-destructive: if the public page lacks a slots container, no visual changes occur. Minimal JS, fast loads.

## Verification checklist
- Toggle days, add blocks (e.g., 09:00–12:00), set rules, **Save & Return**.
- Visit the public profile; slots appear under the dates within your window, respecting min notice and increments.
- Edge checks:
  - Leaving **Daily Cap** blank yields unlimited slots for the day.
  - Buffers prevent back-to-back bookings.
  - Overlapping blocks are rejected.
