# Module 3 — Auth Skeleton (Mock Sessions + Route Guards)

**Purpose:** Introduce login/logout and session checks without external providers. API exposes mock auth endpoints; client stores a token and guards routes. Self-tests are module-aware (logs suffixed by module number).

## Included
- **Server**
  - `/server/auth.mock.js` — in-memory token store, `attachUser` middleware, `ensureAuth`, and auth routes:
    - `POST /api/v1/auth/login` → returns mock token + user
    - `POST /api/v1/auth/logout` → invalidates token
    - `GET  /api/v1/auth/me` → returns current user if token valid
  - `/server/protected.routes.js` — `GET /api/v1/protected/ping` requires auth
  - Patch for `/server/server.js` — mount auth + protected routes
- **Client**
  - `/client/src/auth.js` — token storage + helpers
  - `/client/src/pages/Login.jsx` — simple login form
  - Patch for `/client/src/api.js` — send `Authorization: Bearer <token>` when present & add `auth` endpoints
  - Patch for `/client/src/App.jsx` — show Login/Logout in sidebar and guard routes
- **Self-test**
  - `/scripts/selftest.js` — module-aware logging (`MODULE_NUM`), verifies:
    - login returns token, `auth/me` works
    - protected route fails w/o token and succeeds w/ token
    - client build still succeeds

## Exit Criteria
- `POST /api/v1/auth/login` → 200 with `{ token, user }`
- `GET  /api/v1/auth/me` → 200 with user when token provided
- `GET  /api/v1/protected/ping` → 401 w/o token, 200 w/ token
- UI shows Login when logged out; Logout when logged in; protected pages require login
- `MODULE_NUM=03 npm test` → **ALL CHECKS PASSED** and creates `logs/selftest.mod-03.*`
