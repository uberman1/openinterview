# Create New (View-first) + Playwright

This package adds the **view-first "Create New"** flow and Playwright tests.

## Files to add
- `public/js/home-bindings.js` — hooks existing "Create New / Add New / New Interview" links. Creates a draft in localStorage and routes to a **view page first**.
- `public/js/public_profile.owner.bind.js` — shows **Edit Profile** (owner only) and a **Draft** badge on the read-only page for drafts.

## How to wire
Add these to your pages:

**home.html**
```html
<script type="module" src="/public/js/home-bindings.js"></script>
```

**index.html** (and/or public_profile.html)
```html
<script type="module" src="/public/js/public_profile.owner.bind.js"></script>
```

> These scripts are idempotent and won’t change your HTML. They work even if your app already has a global `store`. If not, they fall back to a minimal localStorage store for testing.

## Playwright tests
- `playwright.config.ts` + `scripts/dev-server.mjs` (serves the project; rewrites `/profile/:id` → `/index.html` for static runs).
- `tests/e2e/`
  - `create-new-view-first.spec.ts`
  - `edit-visibility.spec.ts`
  - `save-publish.spec.ts`

## Run
```bash
npm i
npx playwright install
node scripts/dev-server.mjs      # serves ./ at http://localhost:3000
npm run test:e2e                 # run tests
```

